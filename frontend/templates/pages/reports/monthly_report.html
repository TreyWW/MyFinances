{% load markdownify %}
{% load dashify contains from strfilters %}
<nav class="meta">
    <div class="container">
        <aside>
            {% if invoice.logo %}
                <img src="{{ invoice.logo.url }}" height="100" alt="Company logo">
            {% else %}
                <img src="https://raw.githubusercontent.com/TreyWW/MyFinances/main/frontend/static/img/logo_single.png"
                     height="100"
                     alt="Company logo">
            {% endif %}
            <section class="data">
                <h1></h1>
                <p></p>
                <!--                <a style="color: #000;" href="mailto:address@example.com">address@example.com</a>-->
                <p></p>
            </section>
        </aside>
        <section class="details">
            <div class="card">
                <header>
                    Invoice Ref
                </header>
                <p></p>
            </div>
            <div class="card">
                <header>
                    Date sent
                </header>
                <p></p>
            </div>
            <div class="card">
                <header>
                    Due by
                </header>
                <p></p>
            </div>
            <div class="card">
                <header>
                    Balance due
                </header>
                <p>USD {{ invoice.get_currency_symbol }}</p>
            </div>
        </section>
    </div>
</nav>
<main class="bill">
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Rate</th>
                <th>QTY</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for item in invoice.items.all %}
                <tr>
                    <td>
                        {{ item.name }}
                        <br />
                        {{ item.description|markdownify }}
                    </td>
                    <td>{{ invoice.get_currency_symbol }}{{ item.price_per_hour }}</td>
                    <td>{{ item.hours }}</td>
                    <td>{{ invoice.get_currency_symbol }}{{ item.get_total_price | floatformat:2 }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <section class="summary">
        <div class="card">
            <header>
                Subtotal
            </header>
            <p>{{ invoice.get_currency_symbol }}{{ invoice.get_subtotal }}</p>
        </div>
        {% if invoice.tax %}
            <div class="card">
                <header>
                    Tax
                </header>
                <p>{{ invoice.get_currency_symbol }}0.00</p>
            </div>
        {% endif %}
        {% if invoice.discount_percentage %}
            <div class="card">
                <header>
                    Discount
                </header>
                <p>
                    {{ invoice.discount_percentage }}% off
                    (-{{ invoice.get_currency_symbol }}{{ invoice.get_percentage_amount }})
                </p>
            </div>
        {% endif %}
        {% if invoice.discount_amount %}
            <div class="card">
                <header>
                    {% if not invoice.discount_percentage %}Discount{% endif %}
                </header>
                <p>{{ invoice.get_currency_symbol }}{{ invoice.discount_amount }}</p>
            </div>
        {% endif %}
        <div class="card">
            <header>
                Total
            </header>
            <p>{{ invoice.get_currency_symbol }}{{ invoice.get_total_price }}</p>
        </div>
        <div class="card">
            <header>
                Balance due
            </header>
            <h2>GBP {{ invoice.get_currency_symbol }}{{ invoice.get_total_price }}</h2>
        </div>
    </section>
</main>
<footer class="payment">
    <h1>Payment details</h1>
    <div class="card">
        <header>
            Account holder name
        </header>
        <p></p>
    </div>
    <div class="card">
        <header>
            Account number
        </header>
        <p>=</p>
    </div>
    <div class="card">
        <header>
            Sort code
        </header>
        <p></p>
    </div>
</footer>
